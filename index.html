<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Suivi des Tâches & Brain Gigs</title>
<style>
  body { font-family: Arial, sans-serif; background: #f4f4f9; padding: 20px; }
  h1, h2 { color: #333; }
  .container { display: flex; flex-wrap: wrap; gap: 20px; }
  .list { background: #fff; padding: 15px; border-radius: 10px; flex: 1; min-width: 300px; box-shadow: 0 2px 5px rgba(0,0,0,0.1); overflow-y: auto; }
  ul { list-style: none; padding: 0; margin:0; }
  li { padding: 8px; margin-bottom: 5px; background: #e7e7ff; border-radius: 5px; cursor: pointer; display: flex; justify-content: space-between; align-items: center; }
  li.done { background: #b5f7b0; text-decoration: line-through; }
  .points { font-weight: bold; color: #555; margin-left: 10px; }
  #totalPoints,#reservePoints { font-size: 1.2em; margin-top: 10px; }
  
    #spendTotalBtn { margin: 10px 0; padding: 8px 15px; font-size: 1em; border:none; border-radius:5px; background:#ddb23a; color:#fff; cursor:pointer; }
    #spendTotalBtn:hover { background:#997b27; }

    #addReserveBtn { margin: 10px 0; padding: 8px 15px; font-size: 1em; border:none; border-radius:5px; background:#478a41; color:#fff; cursor:pointer; }
    #addReserveBtn:hover { background:#38743b; }

    #removeReserveBtn { margin: 10px 0; padding: 8px 15px; font-size: 1em; border:none; border-radius:5px; background:#f84c4c; color:#fff; cursor:pointer; }
    #removeReserveBtn:hover { background:#df2828; }

    #resetBtn { margin: 10px 0; padding: 8px 15px; font-size: 1em; border:none; border-radius:5px; background:#ff7b7b; color:#fff; cursor:pointer; }
    #resetBtn:hover { background:#ff5252; }

    /* cacher par défaut l’input */
    .threshold { display: none; }
    /* style pour le bouton + */
    .showThreshold { margin-left: 5px; font-weight: bold; cursor: pointer; border: none; background: transparent; }
    /* compteur affiché après clic sur + */
    .counter { display: none; margin-left: 5px; font-size: 0.9em; color: #333; }
</style>
</head>
<body>

<h1>Suivi des Tâches & Brain Gigs</h1>
<p>Clique sur une tâche pour la marquer comme terminée et gagner des points !</p>



<div style="margin-top:20px;">
  <!-- Dépenser du total -->
  <p>
  <p>Total de points : <span id="totalPoints">0</span></p>
    
    Dépenser du total : 
    <input type="number" id="spendTotal" value="0" min="0" style="width:50px; text-align:center;">
    <button id="spendTotalBtn">Dépenser</button>
  </p>

  <!-- Ajouter dans la réserve -->
  <p>
    Ajouter à la réserve : 
    <input type="number" id="addReserve" value="0" min="0" style="width:50px; text-align:center;">
    <button id="addReserveBtn">Ajouter</button>
  </p>

  <!-- Retirer de la réserve -->
  <p>
    Retirer de la réserve : 
    <input type="number" id="removeReserve" value="0" min="0" style="width:50px; text-align:center;">
    <button id="removeReserveBtn">Restituer</button>
  </p>

  <!-- Affichage des totaux -->
  <p>Points en réserve : <span id="reservePoints" style="width:50px; text-align:center;"></span></p>
</div>
<button id="resetBtn">Réinitialiser toutes les tâches</button>

<div class="container">
  <!-- Tâches -->
  <div class="list">
    <h2>Tâches</h2>
    <ul id="chores">
      <!-- Petites ⭐1 -->
      <li data-points="1" id="t1"><span class="points">1⭐</span>Faire son lit</li>
      <li data-points="1" id="t2"><span class="points">1⭐</span>Vider le lave-vaisselle</li>
      <li data-points="1" id="t3"><span class="points">1⭐</span>Mettre la table</li>
      <li data-points="1" id="t4"><span class="points">1⭐</span>Débarrasser la table après le repas</li>
      <li data-points="1" id="t5"><span class="points">1⭐</span>Sortir les poubelles/recyclage</li>
      <li data-points="1" id="t6"><span class="points">1⭐</span>Arroser les plantes d’intérieur</li>
      <li data-points="1" id="t7"><span class="points">1⭐</span>Faire les paires de chaussettes</li>
      <li data-points="1" id="t8"><span class="points">1⭐</span>Balayer une pièce</li>

      <!-- Moyennes ⭐2 -->
      <li data-points="2" id="t9"><span class="points">2⭐</span>Plier le linge</li>
      <li data-points="2" id="t10"><span class="points">2⭐</span>Passer l’aspirateur dans une pièce</li>
      <li data-points="2" id="t11"><span class="points">2⭐</span>Nettoyer lavabo/miroir</li>
      <li data-points="2" id="t12"><span class="points">2⭐</span>Dépoussiérer les meubles</li>
      <li data-points="2" id="t13"><span class="points">2⭐</span>Ranger les jouets/étagères</li>
      <li data-points="2" id="t14"><span class="points">2⭐</span>Nettoyer 1–2 fenêtres</li>
      <li data-points="2" id="t15"><span class="points">2⭐</span>Aider à préparer le repas</li>
      <li data-points="2" id="t16"><span class="points">2⭐</span>Laver la voiture (extérieur)</li>
      <li data-points="2" id="t17"><span class="points">2⭐</span>Trier le recyclage</li>
      <li data-points="2" id="t18"><span class="points">2⭐</span>Changer les draps</li>

      <!-- Grandes ⭐3–4 -->
      <li data-points="3" id="t19"><span class="points">3⭐</span>Passer la serpillière</li>
      <li data-points="3" id="t20"><span class="points">3⭐</span>Faire une lessive complète</li>
      <li data-points="3" id="t21"><span class="points">3⭐</span>Ratisser les feuilles / déneiger</li>
      <li data-points="3" id="t22"><span class="points">3⭐</span>Nettoyer les étagères du frigo</li>
      <li data-points="3" id="t23"><span class="points">3⭐</span>Ranger le garde-manger/placard</li>
      <li data-points="3" id="t24"><span class="points">3⭐</span>Nettoyer espace animaux</li>
      <li data-points="3" id="t25"><span class="points">3⭐</span>Nettoyer toute la salle de bain</li>
      <li data-points="3" id="t26"><span class="points">3⭐</span>Aider aux courses</li>
      <li data-points="3" id="t27"><span class="points">3⭐</span>Ranger et aspirer le salon</li>
      <li data-points="3" id="t28"><span class="points">3⭐</span>Aider au jardin / travaux extérieurs</li>
      <li data-points="3" id="t29"><span class="points">3⭐</span>Préparer un petit déjeuner ou goûter pour la famille</li>
      <li data-points="3" id="t30"><span class="points">3⭐</span>Organiser la bibliothèque / tiroirs pour la famille</li>
      <li data-points="4" id="t31"><span class="points">4⭐</span>Créer un tableau familial pour suivre corvées et activités</li>
      <li data-points="3" id="t32"><span class="points">3⭐</span>Préparer un repas ou encas pour un voisin ou ami</li>
      <li data-points="3" id="t33"><span class="points">3⭐</span>Aider à quelqu'un à ranger son espace pour mieux étudier/travailler</li>
      <li data-points="3" id="t34"><span class="points">3⭐</span>Nettoyer et organiser un espace commun pour plus de confort</li>
      <li data-points="3" id="t35"><span class="points">3⭐</span>Laver les vitres ou fenêtres pour rendre la maison plus agréable</li>
      <li data-points="4" id="t36"><span class="points">4⭐</span>Créer un système de rangement pour les jouets ou matériel scolaire</li>

    </ul>
  </div>

  <!-- Brain Gigs -->
  <div class="list">
    <h2>Brain Gigs</h2>
    <ul id="brainGigs">
      <!-- Rapides ⭐2 -->
      <li data-points="2" id="g1"><span class="points">2⭐</span>Partager 3 faits intéressants</li>
      <li data-points="2" id="g2"><span class="points">2⭐</span>Poser 5 questions réfléchies</li>
      <li data-points="2" id="g3"><span class="points">2⭐</span>Apprendre un truc de maths nouveau</li>
      <li data-points="2" id="g4"><span class="points">2⭐</span>Écouter podcast ou livre audio et partager</li>
      <li data-points="2" id="g5"><span class="points">2⭐</span>Apprendre un nouveau mot et l’utiliser</li>
      <li data-points="2" id="g6"><span class="points">2⭐</span>Jouer à un jeu de mémoire et expliquer</li>
      <li data-points="2" id="g7"><span class="points">2⭐</span>Écrire 5 points de gratitude</li>

      <!-- Moyens ⭐3 -->
      <li data-points="3" id="g8"><span class="points">3⭐</span>Interviewer un grand-parent/membre de la famille</li>
      <li data-points="3" id="g9"><span class="points">3⭐</span>Lire un chapitre et résumer</li>
      <li data-points="3" id="g10"><span class="points">3⭐</span>Chercher sur un leader/scientifique/inventeur</li>
      <li data-points="3" id="g11"><span class="points">3⭐</span>Écrire et jouer une histoire/poème/chanson</li>
      <li data-points="3" id="g12"><span class="points">3⭐</span>Débattre d’un sujet amusant</li>
      <li data-points="3" id="g13"><span class="points">3⭐</span>Dessiner ou illustrer une idée scientifique</li>
      <li data-points="3" id="g14"><span class="points">3⭐</span>Observer un parent et partager</li>
      <li data-points="3" id="g15"><span class="points">3⭐</span>Apprendre une nouvelle compétence en ligne</li>
      <li data-points="3" id="g16"><span class="points">3⭐</span>Expliquer le fonctionnement d’un objet domestique</li>
      <li data-points="3" id="g17"><span class="points">3⭐</span>Créer un quiz de 5 questions</li>

      <!-- Grandes ⭐4 -->
      <li data-points="4" id="g18"><span class="points">4⭐</span>Inviter un invité et préparer 3 questions</li>
      <li data-points="4" id="g19"><span class="points">4⭐</span>Faire une mini-présentation</li>
      <li data-points="4" id="g20"><span class="points">4⭐</span>Créer un TED Talk familial</li>
      <li data-points="4" id="g21"><span class="points">4⭐</span>Écrire et jouer une mini-pièce/sketch</li>
      <li data-points="4" id="g22"><span class="points">4⭐</span>Chercher un problème réel et proposer une solution</li>
      <li data-points="4" id="g23"><span class="points">4⭐</span>Apprendre et enseigner une recette d’une autre culture</li>
      <li data-points="4" id="g24"><span class="points">4⭐</span>Visiter musée/parc et écrire un résumé</li>
      <li data-points="4" id="g25"><span class="points">4⭐</span>Construire modèle / bricolage / expérience</li>
      <li data-points="4" id="g26"><span class="points">4⭐</span>Créer mini-business et présenter</li>
      <li data-points="4" id="g27"><span class="points">4⭐</span>Organiser soirée quiz familiale</li>
      <li data-points="4" id="g28"><span class="points">4⭐</span>Organiser une mini-activité éducative ou ludique pour un groupe d’amis ou la famille</li>
      <li data-points="4" id="g29"><span class="points">4⭐</span>Dessiner un poster ou infographie éducative pour la famille ou classe</li>
      <li data-points="4" id="g30"><span class="points">4⭐</span>Filmer une courte vidéo tutorielle sur un hobby ou compétence</li>
      <li data-points="4" id="g31"><span class="points">4⭐</span>Inventer un petit jeu ou quiz pour divertir la famille ou amis</li>
      <li data-points="4" id="g32"><span class="points">4⭐</span>Construire un petit objet ou bricolage utile pour la maison ou l’école</li>
      <li data-points="4" id="g33"><span class="points">4⭐</span>Écrire une courte histoire ou BD pour  un ami</li>
      <li data-points="4" id="g34"><span class="points">4⭐</span>Aider un voisin ou membre de la famille avec un projet ou tâche</li>
      <li data-points="4" id="g35"><span class="points">4⭐</span>Proposer une solution à un problème pratique à la maison et tester</li>
      <li data-points="4" id="g36"><span class="points">4⭐</span>Créer un mini-produit / prototype à partir de matériaux recyclés</li>

    </ul>
  </div>

  <!-- Nouvelle colonne pour les tâches en cours -->
  <div class="list">
    <h2>Tâches en cours</h2>
    <ul id="inProgress"></ul>
  </div>

  <!-- Récompenses -->
  <div class="list">
    <h2>Récompenses</h2>
    <ul>
      <li>15 min de temps d’écran - 2⭐</li>
      <li>30 min de temps d’écran - 4⭐</li>
      <li>Choisir le dessert - 4⭐</li>
      <li>Choisir le dîner familial - 5⭐</li>
      <li>Choisir film / jeu familial - 6⭐</li>
      <li>Se coucher 30 min plus tard - 6⭐</li>
      <li>Petit jouet / livre - 10⭐</li>
      <li>Inviter un ami à la maison - 12⭐</li>
      <li>Choisir sortie familiale - 15⭐</li>
      <li>Grande activité (zoo, musée, trampoline) - 20⭐</li>
    </ul>
  </div>
</div>


<script>

let totalPoints = 0;

// Charger l'état au démarrage
function loadState() {
  const doneItems = JSON.parse(localStorage.getItem('doneItems')) || [];
  totalPoints = parseInt(localStorage.getItem('totalPoints')) || 0;
  document.getElementById('totalPoints').textContent = totalPoints;

  // Charger points en réserve (span -> use textContent)
  const reserve = parseInt(localStorage.getItem('reservePoints')) || 0;
  document.getElementById('reservePoints').textContent = reserve;

  // Restaurer les tâches en cours
  const inProg = document.getElementById('inProgress');
  const inProgressItems = JSON.parse(localStorage.getItem('inProgressItems')) || [];
  inProgressItems.forEach(id => {
    const li = document.getElementById(id);
    if (li) inProg.appendChild(li);
  });

  // Restaurer le statut "done" sur toutes les listes
  doneItems.forEach(id => {
    const li = document.getElementById(id);
    if (li) li.classList.add('done');
  });
}

// Sauvegarde de l'état
function saveState() {
  // Sauvegarde des points en réserve (read from span.textContent)
  const reserve = parseInt(document.getElementById('reservePoints').textContent) || 0;
  
   localStorage.setItem('totalPoints', totalPoints);
   localStorage.setItem('reservePoints', reserve);

  // Sauvegarder les tâches en cours
  const inProgressIDs = Array.from(document.querySelectorAll('#inProgress li'))
                             .map(li => li.id);
  localStorage.setItem('inProgressItems', JSON.stringify(inProgressIDs));

  // Sauvegarder l'état "done" de toutes les listes
  const doneItems = [];
  document.querySelectorAll('#chores li, #brainGigs li, #inProgress li').forEach(li => {
    if (li.classList.contains('done')) doneItems.push(li.id);
  });
  localStorage.setItem('doneItems', JSON.stringify(doneItems));
}

// Après création des listes de tâches, injecter un bouton + et un input caché
document.querySelectorAll('#chores li, #brainGigs li').forEach(li => {
    const btn = document.createElement('button');
    btn.textContent = '+';
    btn.className = 'showThreshold';
    li.appendChild(btn);

    const inp = document.createElement('input');
    inp.type = 'number';
    inp.min = 1;
    inp.value = 1;
    inp.className = 'threshold';
    inp.style.width = '40px';
    inp.style.margin = '0 5px';
    li.appendChild(inp);

    const counter = document.createElement('span');
    counter.className = 'counter';
    // initialiser le compteur
    counter.textContent = `0/${inp.value}`;
    li.appendChild(counter);

    // initialize current counter to 0 to avoid undefined
    li.dataset.current = 0;

    // action du bouton +
    btn.addEventListener('click', e => {
      e.stopPropagation();      // empêche toggleDone de se déclencher
      btn.style.display = 'none';
      inp.style.display = 'inline-block';
      counter.style.display = 'inline';        // afficher compteur
      counter.textContent = `0/${inp.value}`;  // initialiser
    });
  });

// 1) Listener sur chaque <li> pour passer en "Tâches en cours"
document.querySelectorAll('#chores li, #brainGigs li').forEach(li => {
    li.addEventListener('click', e => {
      if (li.parentElement.id === 'inProgress') return;
      // si ce n’est pas un clic sur l’étoile ou le '+'
      if (e.target.classList.contains('points') || e.target.classList.contains('showThreshold')) return;
      document.getElementById('inProgress').appendChild(li);
      saveState();
    });
  });

// 2) Adapter toggleDone : suppression du bloc de déplacement
function toggleDone(event) {
    const span = event.target;
    if (!span.classList.contains('points')) return;
    const li = span.closest('li');
    if (!li || !li.dataset.points) return;

    // ne rien faire si déjà validée
    if (li.classList.contains('done')) return;

    // incrément du compteur…
    const threshold = parseInt(li.querySelector('input.threshold').value) || 1;
    let count = parseInt(li.dataset.current) || 0;
    count++;
    li.dataset.current = count;

    // mise à jour du compteur
    const counter = li.querySelector('.counter');
    if (counter) counter.textContent = `${count}/${threshold}`;

    // n’ajoute les points qu’au seuil
    if (count >= threshold) {
      totalPoints += parseInt(li.dataset.points);
      document.getElementById('totalPoints').textContent = totalPoints;
      li.classList.add('done');
      li.querySelector('input.threshold').disabled = true;

      // déplacer la tâche validée hors de "Tâches en cours"
      if (li.parentElement.id === 'inProgress') {
        const dest = li.id.startsWith('t')
          ? document.getElementById('chores')
          : document.getElementById('brainGigs');
        dest.appendChild(li);
      }

      saveState();
    }
  }

  // 3) Binding sur les étoiles avec stopPropagation
  document.querySelectorAll('.points').forEach(span => {
    span.style.cursor = 'pointer';
    span.addEventListener('click', toggleDone);
  });

// Bouton reset (ne touche pas à la réserve)
document.getElementById('resetBtn').addEventListener('click', () => {
  totalPoints = 0;
  document.getElementById('totalPoints').textContent = totalPoints;

  // Retirer le style "done" de toutes les tâches (y compris celles en cours)
  document.querySelectorAll('#chores li, #brainGigs li, #inProgress li')
    .forEach(li => li.classList.remove('done'));

  // Renvoyer les tâches en cours dans leur liste d'origine
  const inProgress = document.getElementById('inProgress');
  Array.from(inProgress.children).forEach(li => {
    const dest = li.id.startsWith('t')
      ? document.getElementById('chores')
      : document.getElementById('brainGigs');
    dest.appendChild(li);
  });

  // Réinitialiser les compteurs et les masquer
  document.querySelectorAll('#chores li, #brainGigs li, #inProgress li').forEach(li => {
      li.dataset.current = 0;
      const counter = li.querySelector('.counter');
      const inp     = li.querySelector('input.threshold');
      if (counter && inp) {
        counter.textContent = `0/${parseInt(inp.value) || 1}`;
        counter.style.display = 'none';
      }
    });

  saveState();
});

// Dépenser du total
document.getElementById('spendTotalBtn').addEventListener('click', () => {
  const spend = parseInt(document.getElementById('spendTotal').value) || 0;
  if (spend > totalPoints) { alert("Pas assez de points totaux !"); return; }
  totalPoints -= spend;
  document.getElementById('totalPoints').textContent = totalPoints;
  saveState();
  document.getElementById('spendTotal').value = 0;
});

// Ajouter dans la réserve
document.getElementById('addReserveBtn').addEventListener('click', () => {
  const add = parseInt(document.getElementById('addReserve').value) || 0;
  if (add > totalPoints) { alert("Pas assez de points totaux !"); return; }
  totalPoints -= add;
  const reserveSpan = document.getElementById('reservePoints');
  const currentReserve = parseInt(reserveSpan.textContent) || 0;
  reserveSpan.textContent = currentReserve + add;
  document.getElementById('totalPoints').textContent = totalPoints;
  saveState();
  document.getElementById('addReserve').value = 0;
});

// Retirer de la réserve
document.getElementById('removeReserveBtn').addEventListener('click', () => {
  const remove = parseInt(document.getElementById('removeReserve').value) || 0;
  const reserveSpan = document.getElementById('reservePoints');
  const currentReserve = parseInt(reserveSpan.textContent) || 0;
  if (remove > currentReserve) { alert("Pas assez de points en réserve !"); return; }
  reserveSpan.textContent = currentReserve - remove;
  totalPoints += remove;
  document.getElementById('totalPoints').textContent = totalPoints;
  saveState();
  document.getElementById('removeReserve').value = 0;
});

// Charger état au démarrage
loadState();

</script>

</body>
</html>
</body>
</html>
loadState();

</script>

</body>
</html>
